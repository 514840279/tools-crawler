var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=(t,r,s)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s,i=(e,t)=>{for(var r in t||(t={}))a.call(t,r)&&o(e,r,t[r]);if(s)for(var r of s(t))n.call(t,r)&&o(e,r,t[r]);return e},c=(e,s)=>t(e,r(s));import{x as u,E as p}from"./index.49f53232.js";var O=(e=>(e[e.SUCCESS=200]="SUCCESS",e[e.ERROR_1=-1]="ERROR_1",e[e.IO_EXCEPTION=-2]="IO_EXCEPTION",e[e.NO_LOG=-10]="NO_LOG",e[e.NO_ACCESS=-11]="NO_ACCESS",e[e.ERROR_100=-100]="ERROR_100",e[e.ERROR_404=404]="ERROR_404",e[e.ERROR_503=503]="ERROR_503",e))(O||{});const R=new class{constructor(e){var t,r;o(this,"symbol"!=typeof(t="instance")?t+"":t,r),this.instance=u.create(e),this.instance.defaults.headers.post["Content-Type"]="application/json",this.instance.defaults.headers.put["Content-Type"]="application/json",this.instance.interceptors.request.use((e=>e),(e=>Promise.reject(e))),this.instance.interceptors.response.use((e=>{if(e.status==O.SUCCESS)switch(e.data.code){case O.ERROR_1:return void p({message:e.data.msg,type:"warning"});case O.SUCCESS:default:return e}else p({message:"未知",type:"error"})}),(e=>(p({message:e,type:"error"}),Promise.reject(e))))}request(e){return new Promise(((t,r)=>{this.instance.request(e).then((e=>{t(e.data)})).catch((e=>(r(e),e)))}))}get(e,t,r){return this.request(c(i({},r),{url:e,data:t,method:"GET"}))}post(e,t,r){return this.request(c(i({},r),{url:e,data:t,method:"POST"}))}delete(e,t,r){return this.request(c(i({},r),{url:e,data:t,method:"DELETE"}))}patch(e,t,r){return this.request(c(i({},r),{url:e,data:t,method:"PATCH"}))}}({timeout:3e3});export{R as h};
