var e=Object.defineProperty,l=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,s=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t;import{_ as o,d as r,r as n,b as u,e as c,o as i,c as d,a as m,w as p,F as h,f as v,g as f,u as b,h as g,i as C,j as y,k,t as P,l as _,m as w,n as z,p as T,v as S,q as E,s as V,T as x}from"./index.49f53232.js";import{h as N}from"./http.b0ffeadd.js";const U={id:"TableSave"},O=g("保存"),I=g("取消");var q=o(r({name:"TableSave",props:{info:{default:()=>{}},columns:{default:()=>[]},labelPosition:{default:()=>"top"}},emits:["onSave","update:info","onCancel"],setup(e,{emit:l}){const a=e;let t=n({});function s(){l("update:info",t.value),l("onSave")}function o(){l("onCancel")}return u((()=>{t.value=a.info})),(e,l)=>{const r=c("el-input"),n=c("el-form-item"),u=c("el-button"),g=c("el-form");return i(),d("div",U,[m(g,{ref:"form",model:b(t),"label-width":"120px","label-position":a.labelPosition},{default:p((()=>[(i(!0),d(h,null,v(a.columns,((e,l)=>(i(),f(n,{key:l,label:e.title},{default:p((()=>[m(r,{modelValue:b(t)[e.name],"onUpdate:modelValue":l=>b(t)[e.name]=l},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label"])))),128)),m(n,null,{default:p((()=>[m(u,{type:"primary",onClick:s},{default:p((()=>[O])),_:1}),m(u,{onClick:o},{default:p((()=>[I])),_:1})])),_:1})])),_:1},8,["model","label-position"])])}}}),[["__scopeId","data-v-2fc2cca6"]]);const A={id:"TableColumnSelect"},D={class:"infinite-list",style:{overflow:"auto"}};var F=o(r({name:"TableColumnSelect",props:{columns:{default:()=>[]}},emits:["update:columns"],setup(e,{emit:l}){const a=e;let t=n([]),s=n([]),o=n([]),r=[];function u(e){r=o.value.filter((l=>!e.includes(l))),r.length>=1&&r.forEach(((e,l)=>{t.value.forEach(((l,a)=>{l.title==e&&(l.show=!1)}))})),e.forEach(((e,l)=>{t.value.forEach(((l,a)=>{l.title==e&&(l.show=!0)}))})),l("update:columns",t.value)}return C((()=>{t.value=a.columns,t.value.forEach(((e,l)=>{null==e.show&&(e.show=!0),e.show&&s.value.push(e.title),o.value.push(e.title)}))})),(e,l)=>{const a=c("el-button"),o=c("el-checkbox"),r=c("el-checkbox-group"),n=c("el-popover");return i(),d("div",A,[m(n,{placement:"bottom",title:"列筛选",trigger:"click"},{reference:p((()=>[m(a,{icon:"CaretBottom",circle:"",size:"small",title:"列选择"})])),default:p((()=>[m(r,{modelValue:b(s),"onUpdate:modelValue":l[0]||(l[0]=e=>y(s)?s.value=e:s=e),onChange:u,style:{"max-width":"1500px"}},{default:p((()=>[k("ul",D,[(i(!0),d(h,null,v(b(t),((e,l)=>(i(),d("li",{key:l,class:"infinite-list-item"},[m(o,{modelValue:e.title,"onUpdate:modelValue":l=>e.title=l,label:e.title,size:"small"},null,8,["modelValue","onUpdate:modelValue","label"])])))),128))])])),_:1},8,["modelValue"])])),_:1})])}}}),[["__scopeId","data-v-e65a8766"]]);const j={id:"TableSearchColumnSelect"};var B=o(r({name:"TableSearchColumnSelect",props:{columns:{default:()=>[]},item:{default:()=>({operator:"eq",column:"不知道",title:"不知道",symbol:"不知道",data:"不知道",showdata:!1})},index:{default:()=>0},parameters:{default:()=>[]}},setup(e){const l=e;let a=n();function t(e){l.columns.forEach((a=>{a.searchName==e&&(l.item.column=a.searchName,l.item.title=a.searchTitle,l.item.searchPlaceholder=a.searchPlaceholder)}))}return u((()=>{a.value=l.item.column})),(l,s)=>{const o=c("el-option"),r=c("el-select");return i(),d("div",j,[m(r,{modelValue:b(a),"onUpdate:modelValue":s[0]||(s[0]=e=>y(a)?a.value=e:a=e),size:"mini",style:{width:"100%"},onChange:t},{default:p((()=>[(i(!0),d(h,null,v(e.columns,((e,l)=>(i(),f(o,{key:l,label:e.searchTitle,value:e.searchName},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-4de9f826"]]);const R={id:"TableSearchSymbolSelect"};var L=o(r({name:"TableSearchSymbolSelect",props:{item:{default:()=>({operator:"eq",column:"不知道",title:"不知道",symbol:"不知道",data:"不知道",showdata:!1})},index:{default:()=>0},parameters:{default:()=>[]}},setup(e){const l=e,a=[{label:"相等",value:"eq"},{label:"不等",value:"notEq"},{label:"小于",value:"less"},{label:"小于等于",value:"lessAndEq"},{label:"大于",value:"great"},{label:"大于等于",value:"greatAndEq"},{label:"包含",value:"like"},{label:"为空",value:"isNull"},{label:"不为空",value:"isNotNull"}];function t(e){switch(e){case"eq":case"notEq":case"less":case"lessAndEq":case"great":case"greatAndEq":case"like":default:l.item.showdata=!0;break;case"isNull":case"isNotNull":case"isEmpty":case"isNotEmpty":l.item.showdata=!1}}return(l,s)=>{const o=c("el-option"),r=c("el-select");return i(),d("div",R,[m(r,{modelValue:e.item.symbol,"onUpdate:modelValue":s[0]||(s[0]=l=>e.item.symbol=l),size:"small",style:{width:"100%"},onChange:t},{default:p((()=>[(i(),d(h,null,v(a,((e,l)=>m(o,{key:l,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-15299a4f"]]);const $={id:"TableSearchParameters"};var G=o(r({name:"TableSearchParameters",props:{searchColumns:{default:()=>[]},searchParameters:{default:()=>[]}},emits:["searchTable"],setup(e,{emit:l}){const a=e;let t=n([]),s=n(0),o=n(0);function r(){0==o.value&&(o.value=t.value.length),o.value==s.value&&(s.value=0);let e=t.value[s.value];a.searchParameters.push({operator:"and",column:e.searchName,title:e.searchTitle,symbol:"eq",data:"",searchPlaceholder:e.searchPlaceholder,showdata:!0}),s.value++}function C(){l("searchTable")}return u((()=>{t.value=a.searchColumns})),(e,l)=>{const s=c("el-button"),o=c("el-col"),n=c("el-input"),u=c("el-row");return i(),d("div",$,[(i(!0),d(h,null,v(a.searchParameters,((e,r)=>(i(),f(u,{key:r,class:"prow"},{default:p((()=>[m(o,{span:1},{default:p((()=>[r>0?(i(),f(s,{key:0,onClick:l=>function(e,l){"and"==e.operator?e.operator="or":e.operator="and",a.searchParameters.splice(l,1,e)}(e,r),size:"small"},{default:p((()=>[g(P(e.operator),1)])),_:2},1032,["onClick"])):_("",!0)])),_:2},1024),m(o,{span:4},{default:p((()=>[m(B,{columns:b(t),item:e,index:r,parameters:a.searchParameters,"onUpdate:parameters":l[0]||(l[0]=e=>a.searchParameters=e)},null,8,["columns","item","index","parameters"])])),_:2},1024),m(o,{span:3},{default:p((()=>[m(L,{item:e,index:r,parameters:a.searchParameters,"onUpdate:parameters":l[1]||(l[1]=e=>a.searchParameters=e)},null,8,["item","index","parameters"])])),_:2},1024),e.showdata?(i(),f(o,{key:0,span:6},{default:p((()=>[m(n,{size:"small",modelValue:e.data,"onUpdate:modelValue":l=>e.data=l,placeholder:e.searchPlaceholder},null,8,["modelValue","onUpdate:modelValue","placeholder"])])),_:2},1024)):_("",!0),m(o,{span:1},{default:p((()=>[m(s,{onClick:e=>function(e,l){a.searchParameters.splice(l,1)}(0,r),icon:"Remove",circle:"",size:"small",title:"删除"},null,8,["onClick"])])),_:2},1024)])),_:2},1024)))),128)),m(u,null,{default:p((()=>[m(o,{span:12},{default:p((()=>[m(s,{onClick:r,type:"success",icon:"Plus",circle:"",size:"small",title:"添加"}),m(s,{onClick:C,type:"success",icon:"Check",circle:"",size:"small",title:"确定"})])),_:1})])),_:1})])}}}),[["__scopeId","data-v-0a85a7d6"]]);const H={id:"TableSortColumnSelect"};var J=o(r({name:"TableSortColumnSelect",props:{sortColumns:{default:()=>[]},item:{default:()=>({sortIndex:0,sortTitle:"未知",sortOrder:"未知",sortName:"未知"})}},setup(e){const l=e;let a=n();function t(e){l.sortColumns.forEach((a=>{a.sortName==e&&(l.item=a)}))}return u((()=>{a.value=l.item.sortName})),(l,s)=>{const o=c("el-option"),r=c("el-select");return i(),d("div",H,[m(r,{modelValue:b(a),"onUpdate:modelValue":s[0]||(s[0]=e=>y(a)?a.value=e:a=e),size:"small",style:{width:"100%"},onChange:t},{default:p((()=>[(i(!0),d(h,null,v(e.sortColumns,((e,l)=>(i(),f(o,{key:l,label:e.sortTitle,value:e.sortName},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-98cc11a4"]]);const K={id:"TableSortParameters"};var M=o(r({name:"TableSortParameters",props:{sortColumns:{default:()=>[]},sortParameters:null},emits:["sortTable"],setup(e,{emit:l}){const a=e;let t=n([]),s=n(0),o=n(0),r=n(0);function b(){if(0==r.value&&(r.value=a.sortColumns.length),r.value!=o.value)for(let e=0;e<a.sortColumns.length;e++){const l=a.sortColumns[e];let t=!0;if(a.sortParameters.forEach((e=>{e.sortName===l.sortName&&(t=!1)})),t)return a.sortParameters.push(l),s.value++,o.value++,void C()}}function C(){let e=1;a.sortParameters.forEach((l=>{l.sortIndex=e,a.sortParameters.splice(e-1,1,l),e++}))}function y(){l("sortTable")}return u((()=>{t.value=a.sortColumns,s.value=0,o.value=0,r.value=0})),(l,t)=>{const o=c("el-button"),r=c("el-col"),n=c("el-row");return i(),d("div",K,[(i(!0),d(h,null,v(a.sortParameters,((l,u)=>(i(),f(n,{key:u,class:"prow"},{default:p((()=>[m(r,{span:1},{default:p((()=>[u>0?(i(),f(o,{key:0,onClick:e=>function(e,l){a.sortParameters.splice(l,1),a.sortParameters.splice(l-1,0,e),C()}(l,u),icon:"CaretTop",circle:"",size:"small",title:"添加"},null,8,["onClick"])):_("",!0)])),_:2},1024),m(r,{span:6},{default:p((()=>[m(J,{sortColumns:e.sortColumns,item:l,index:u,parameters:a.sortParameters,"onUpdate:parameters":t[0]||(t[0]=e=>a.sortParameters=e)},null,8,["sortColumns","item","index","parameters"])])),_:2},1024),m(r,{span:1},{default:p((()=>[m(o,{onClick:e=>function(e,l){"asc"==e.sortOrder?e.sortOrder="desc":e.sortOrder="asc"}(l),size:"small"},{default:p((()=>[g(P(l.sortOrder),1)])),_:2},1032,["onClick"])])),_:2},1024),m(r,{span:1},{default:p((()=>[m(o,{onClick:e=>function(e,l){a.sortParameters.splice(l,1),s.value--,C()}(0,u),icon:"Remove",circle:"",size:"small",title:"删除"},null,8,["onClick"])])),_:2},1024)])),_:2},1024)))),128)),m(n,null,{default:p((()=>[m(r,{span:8},{default:p((()=>[m(o,{onClick:b,type:"success",icon:"Plus",circle:"",size:"small",title:"添加"}),m(o,{onClick:y,type:"success",icon:"Check",circle:"",size:"small",title:"确定"})])),_:1})])),_:1})])}}}),[["__scopeId","data-v-af05584e"]]);var Q=o(r({name:"TableSearch",props:{searchColumns:{default:()=>[]},searchParameters:{default:()=>[]}},emits:["searchTable"],setup(e,{emit:l}){const a=e;let t=n([]),s=n(0);function o(){l("searchTable")}return u((()=>{t.value=a.searchColumns,a.searchColumns.forEach(((e,l)=>{l<5&&a.searchParameters.push({operator:"and",column:e.searchName,title:e.searchTitle,symbol:"like",data:"",searchPlaceholder:e.searchPlaceholder,showdata:!0})})),s.value=a.searchParameters.length})),(e,l)=>{const r=c("el-input"),n=c("el-col"),u=c("el-button"),g=c("el-row");return i(),f(g,null,{default:p((()=>[(i(!0),d(h,null,v(b(t),((e,t)=>(i(),f(n,{span:b(s)/20,key:t,class:"ainput"},{default:p((()=>[m(r,{size:"small",modelValue:a.searchParameters[t].data,"onUpdate:modelValue":e=>a.searchParameters[t].data=e,placeholder:e.searchPlaceholder,onInput:l[0]||(l[0]=e=>o())},null,8,["modelValue","onUpdate:modelValue","placeholder"])])),_:2},1032,["span"])))),128)),m(n,{span:2},{default:p((()=>[m(u,{title:"确定",onClick:l[1]||(l[1]=e=>o()),type:"success",icon:"Check",circle:"",size:"small"}),m(u,{title:"重置",onClick:l[2]||(l[2]=e=>(a.searchParameters.forEach((e=>{e.data=""})),void o())),icon:"CloseBold",circle:"",size:"small"})])),_:1})])),_:1})}}}),[["__scopeId","data-v-87460e1c"]]);const W={style:{"margin-top":"20px"}},X={style:{"text-align":"right","margin-right":"10px"}},Y={id:"Table",ref:"print"},Z={key:0,class:"apagination"};var ee=o(r({name:"Table",props:{rootUrl:{default:()=>""},page:{default:()=>({pageNumber:1,sizes:[10,20,50,100],pageSize:10,totalElements:0,info:{}})},columns:{default:()=>[]},optionBtn:{default:()=>({})}},emits:["onClickRow"],setup(e,{emit:o}){const r=e;let u={page:r.rootUrl+"/page",findAll:r.rootUrl+"/findAll",add:r.rootUrl+"/save",upd:r.rootUrl+"/save",del:r.rootUrl+"/delete",delAll:r.rootUrl+"/deleteAll"},g=n(((e,o)=>{for(var r in o||(o={}))a.call(o,r)&&s(e,r,o[r]);if(l)for(var r of l(o))t.call(o,r)&&s(e,r,o[r]);return e})({search:!0,searchParam:!0,sort:!0,add:!0,page:!0,opt:!0,reset:!1,optbtn:{option:!0,info:!0,upd:!0,state:!0,del:!0}},r.optionBtn)),P={pageNumber:1,sizes:[10,20,50,100],pageSize:10,totalElements:0,info:{}},U=n(!0),O=n([]),I=n({}),A=n("page"),D=n(r.columns),j=[],B=n([]),R=n(!1),L=n(),$=[],H=n([]),J=n(),K=n(!1);function ee(){A.value="page",U.value=!0,P.sortList=H.value,P.searchList=B.value,N.post(u.page,P).then((e=>{null!=e.data&&200==e.code&&(O.value=e.data.content,e.data.totalElements>0&&0==O.value.length&&(P.pageNumber=P.pageNumber-1,ee()),P.totalElements=e.data.totalElements,U.value=!1)})).catch((e=>{}))}function le(e){P.pageSize=e,ee()}function ae(e){P.pageNumber=e,ee()}function te(){se(I.value)}function se(e){U.value=!0,N.post(u.upd,e).then((e=>{200==e.code&&ee()})).catch((e=>{}))}C((()=>{!function(){D.value.forEach(((e,l)=>{if(null!=e.sort){let a=null==e.sortOrder?"asc":e.sortOrder;$.push({sortIndex:l,sortName:e.name,sortTitle:e.title,sortOrder:a})}if(null!=e.search){let l=null==e.searchType?"text":e.searchType;j.push({searchName:e.name,searchTitle:e.title,searchType:l,searchDataFormatter:e.searchDataFormatter,searchDataDefault:e.searchDataDefault,searchDataArray:e.searchDataArray,searchPlaceholder:"请输入"+e.title})}e.show=null==e.show||e.show})),0==j.length&&(g.value.search=!1);0==$.length&&(g.value.sort=!1)}(),ee()}));const oe=w((()=>{let e=new Array;return D.value.forEach((l=>{l.show&&e.push(l)})),e}));return(l,a)=>{const t=c("el-col"),s=c("el-button"),r=c("el-row"),n=c("el-table-column"),C=c("el-table"),w=c("el-pagination"),re=z("loading");return i(),d("div",W,[m(x,{name:"el-zoom-in-top"},{default:p((()=>[T(k("div",{class:V("page"==b(A)?"transition-box":null)},[m(r,null,{default:p((()=>[m(t,{span:18},{default:p((()=>[b(g).search?(i(),f(Q,{key:0,searchColumns:b(j),searchParameters:b(B),"onUpdate:searchParameters":a[0]||(a[0]=e=>y(B)?B.value=e:B=e),onSearchTable:ee},null,8,["searchColumns","searchParameters"])):_("",!0)])),_:1}),m(t,{span:6},{default:p((()=>[k("div",X,[E(l.$slots,"rightBtn",{},void 0,!0),b(g).searchParam?(i(),f(s,{key:0,title:"查询",onClick:a[1]||(a[1]=e=>(K.value=!1,J.value="",R.value=!R.value,void(R.value?L.value="success":L.value=""))),type:b(L),icon:"Search",circle:"",size:"small"},null,8,["type"])):_("",!0),b(g).sort?(i(),f(s,{key:1,title:"排序",onClick:a[2]||(a[2]=e=>(R.value=!1,L.value="",K.value=!K.value,void(K.value?J.value="success":J.value=""))),type:b(J),icon:"Sort",circle:"",size:"small"},null,8,["type"])):_("",!0),b(g).reset?(i(),f(s,{key:2,title:"重置",onClick:a[3]||(a[3]=e=>(U.value=!0,H.value=[],B.value=[],j.forEach(((e,l)=>{l<5&&B.value.push({operator:"and",column:e.searchName,title:e.searchTitle,symbol:"like",data:"",searchPlaceholder:e.searchPlaceholder,showdata:!0})})),void ee())),icon:"Setting",circle:"",size:"small"})):_("",!0),b(g).add?(i(),f(s,{key:3,title:"添加",onClick:a[4]||(a[4]=e=>(I.value={},void(A.value="edit"))),type:"success",icon:"CirclePlusFilled",circle:"",size:"small"})):_("",!0),m(s,{title:"刷新",onClick:a[5]||(a[5]=e=>ee()),icon:"Refresh",circle:"",size:"small"}),m(F,{columns:b(D),"onUpdate:columns":a[6]||(a[6]=e=>y(D)?D.value=e:D=e),circle:"",size:"small"},null,8,["columns"])])])),_:3})])),_:3}),b(g).searchParam&&b(R)?(i(),f(G,{key:0,searchColumns:b(j),searchParameters:b(B),"onUpdate:searchParameters":a[7]||(a[7]=e=>y(B)?B.value=e:B=e),onSearchTable:ee},null,8,["searchColumns","searchParameters"])):_("",!0),b(g).sort&&b(K)?(i(),f(M,{key:1,sortColumns:b($),sortParameters:b(H),"onUpdate:sortParameters":a[8]||(a[8]=e=>y(H)?H.value=e:H=e),onSortTable:ee},null,8,["sortColumns","sortParameters"])):_("",!0),k("div",Y,[T((i(),f(C,{id:"tableid",data:b(O),style:{width:"100%"}},{default:p((()=>[(i(!0),d(h,null,v(b(oe),((e,l)=>(i(),f(n,{key:l,prop:e.name,label:e.title,width:null==e.width?"":e.width,align:null==e.align?"left":e.align,resizable:null!=e.resizable&&e.resizable},null,8,["prop","label","width","align","resizable"])))),128)),b(g).opt?(i(),f(n,{key:0,fixed:"right",label:"操作",width:"124"},{default:p((e=>{var l,a,t,r,n;return[(null==(l=b(g).optbtn)?void 0:l.option)?(i(),f(s,{key:0,onClick:l=>{return a=e.row,void o("onClickRow",a);var a},type:"success",icon:"Edit",circle:"",size:"small",title:"配置"},null,8,["onClick"])):_("",!0),(null==(a=b(g).optbtn)?void 0:a.upd)?(i(),f(s,{key:1,onClick:l=>{return a=e.row,I.value=a,void(A.value="edit");var a},type:"success",icon:"Edit",circle:"",size:"small",title:"修改"},null,8,["onClick"])):_("",!0),(null==(t=b(g).optbtn)?void 0:t.state)&&0==e.row.deleteFlag||null==e.row.deleteFlag?(i(),f(s,{key:2,onClick:l=>{return(a=e.row).deleteFlag=1,void se(a);var a},type:"warning",icon:"View",circle:"",size:"small",title:"已启用"},null,8,["onClick"])):_("",!0),(null==(r=b(g).optbtn)?void 0:r.state)&&1==e.row.deleteFlag?(i(),f(s,{key:3,onClick:l=>{return(a=e.row).deleteFlag=0,void se(a);var a},type:"info",icon:"View",circle:"",size:"small",title:"已禁用"},null,8,["onClick"])):_("",!0),(null==(n=b(g).optbtn)?void 0:n.del)?(i(),f(s,{key:4,onClick:l=>{return a=e.row,U.value=!0,void N.delete(u.del,a).then((e=>{200==e.code&&ee()})).catch((e=>{}));var a},type:"danger",icon:"Delete",circle:"",size:"small",title:"删除"},null,8,["onClick"])):_("",!0)]})),_:1})):_("",!0)])),_:1},8,["data"])),[[re,b(U)]]),b(g).page?(i(),d("div",Z,[m(r,null,{default:p((()=>[m(t,{span:12,offset:12},{default:p((()=>[m(w,{class:"pagex",style:{float:"right"},background:"",onSizeChange:le,onCurrentChange:ae,"current-page":b(P).pageNumber,"page-sizes":e.page.sizes,"page-size":b(P).pageSize,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:b(P).totalElements,"hide-on-single-page":!0},null,8,["current-page","page-sizes","page-size","total"])])),_:1})])),_:1})])):_("",!0)],512)],2),[[S,"page"==b(A)]])])),_:3}),m(x,{name:"el-zoom-in-top"},{default:p((()=>["edit"==b(A)?(i(),d("div",{key:0,class:V("edit"==b(A)?"transition-box":null)},["edit"==b(A)?(i(),f(q,{key:0,columns:e.columns,info:b(I),"onUpdate:info":a[9]||(a[9]=e=>y(I)?I.value=e:I=e),onOnSave:te,onOnCancel:ee},null,8,["columns","info"])):_("",!0)],2)):_("",!0)])),_:1})])}}}),[["__scopeId","data-v-550c350c"]]);export{ee as T};
